
#ifndef __AIRQ_TERMINAL_H__
#define __AIRQ_TERMINAL_H__

#include "VT100.h"
#include "messages.h"

#define TERMINAL_WIDTH 80

void printBanner()
{
    VT100.setCursor(2, 1);
    printMessage(0);
}

void reportValue(uint8_t row, float value, char *label, char *unit)
{
    VT100.setCursor(row, 4);
    VT100.setTextColor(VT_YELLOW);
    Serial.print(label);

    VT100.setCursor(row, 19);
    VT100.setTextColor(VT_WHITE);
    Serial.print(value);
    Serial.print(" ");
    Serial.println(unit);
}

void printReport(float dustDensity, float humidity, float temperature, float dewpoint, uint32_t co2, uint32_t tvoc, bool airQValid)
{
    VT100.setCursor(10, 1);
    Serial.println(F(" \e(0\x6c\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x77\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x77\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x6b\e(B"));
    Serial.println(F(" \e(0\x78              \x78            \x78                                               \x78\e(B"));
    Serial.println(F(" \e(0\x74\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x6E\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x6E\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x75\e(B"));
    Serial.println(F(" \e(0\x78              \x78            \x78                                               \x78\e(B"));
    Serial.println(F(" \e(0\x74\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x6E\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x6E\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x75\e(B"));
    Serial.println(F(" \e(0\x78              \x78            \x78                                               \x78\e(B"));
    Serial.println(F(" \e(0\x74\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x6E\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x6E\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x75\e(B"));
    Serial.println(F(" \e(0\x78              \x78            \x78                                               \x78\e(B"));
    Serial.println(F(" \e(0\x74\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x6E\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x6E\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x75\e(B"));
    Serial.println(F(" \e(0\x78              \x78            \x78                                               \x78\e(B"));
    Serial.println(F(" \e(0\x74\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x6E\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x6E\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x75\e(B"));
    Serial.println(F(" \e(0\x78              \x78            \x78                                               \x78\e(B"));
    Serial.println(F(" \e(0\x6d\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x76\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x76\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x71\x6a\e(B"));

    reportValue(11, dustDensity, "PM2.5", "mg/m3");
    reportValue(13, humidity, "Humidity", "%RH");
    reportValue(15, temperature, "Temperature", "C");
    reportValue(17, dewpoint, "Dew Point", "C");
    reportValue(19, co2, "CO2", "ppm");
    reportValue(21, tvoc, "TVOC", "ppb");

    VT100.cursorOff();
}

void printStatusBar(bool airQValid, bool runIn, bool error, bool busy)
{
    VT100.setBackgroundColor(VT_BLACK);
    //VT100.clearScreen();

    printBanner();

    VT100.setCursor(1, 1);
    VT100.setBackgroundColor(VT_YELLOW);
    VT100.setTextColor(VT_BLACK);
    Serial.print(" AirQ V1.0 ");

    if (airQValid)
    {
        Serial.print(" VLD ");
    }
    else
    {
        Serial.print("     ");
    }

    if (runIn)
    {
        Serial.print(" RIN ");
    }
    else
    {
        Serial.print("     ");
    }

    if (error)
    {
        Serial.print(" ERR ");
    }
    else
    {
        Serial.print("     ");
    }

    if (busy)
    {
        Serial.print(" BSY ");
    }
    else
    {
        Serial.print("     ");
    }

    VT100.clearLineAfter();
    VT100.setCursor(1, TERMINAL_WIDTH + 1);
    VT100.setBackgroundColor(VT_BLACK);
    VT100.setTextColor(VT_WHITE);
    VT100.clearLineAfter();
}

#endif